#!/bin/bash
corPadrao="\033[0m"
preto="\033[0;30m"
vermelho="\033[0;31m"
verde="\033[0;32m"
marrom="\033[0;33m"
azul="\033[0;34m"
purple="\033[0;35m"
cyan="\033[0;36m"
cinzaClaro="\033[0;37m"
pretoCinza="\033[1;30m"
vermelhoClaro="\033[1;31m"
verdeClaro="\033[1;32m"
amarelo="\033[1;33m"
azulClaro="\033[1;34m"
purpleClaro="\033[1;35m"
cyanClaro="\033[1;36m"
branco="\033[1;37

clear
read -p "Qual o nome do usuario a redefinir: " namer
 if cat /etc/passwd |grep $namer: > /dev/null
 then
 echo " "
 else
 clear
 echo "Usuario $namer não existe"
 exit
 fi
clear
function mudarnome(){

clear
printf "Novo nome para usuario $user: "; read nome
usermod -l $nome $namer 1>/dev/null 2>/dev/null
echo -e "\nUsuario: $namer, Novo nome: $nome."
exit
echo ""
echo -ne "\033[01;36mENTER PARA VOLTAR AO MENU PRINCIPAL..."
read ENTER
vpspack
exit
}
function limite(){
read -p "Qual a novo limite para $namer: " liml
(echo "$liml" ; echo "$liml" ) |limiteuser $namer > /dev/null 2>/dev/null
echo "$liml" > /etc/VpsPackdir/limite/$namer
echo "Nova limite aplicado"
echo ""
echo -ne "\033[01;36mENTER PARA VOLTAR AO MENU PRINCIPAL..."
read ENTER
vpspack
exit
}
function expiracao(){
echo "Qual a nova data : formato AAAA/MM/DD"
read -p ": " date
chage -E $date $namer 2> /dev/null
echo -e "\033[1;31mUsuario $namer Date: $date\033[0m"
echo ""
echo -ne "\033[01;36mENTER PARA VOLTAR AO MENU PRINCIPAL..."
read ENTER
vpspack
exit
}
function nova(){
read -p "Qual a nova senha para $namer: " senha
(echo "$senha" ; echo "$senha" ) |passwd $namer > /dev/null 2>/dev/null
echo "$senha" > /etc/VpsPackdir/senha/$namer
echo "Nova senha aplicada"
echo ""
echo -ne "\033[01;36mENTER PARA VOLTAR AO MENU PRINCIPAL..."
read ENTER
vpspack
exit
}

clear
if [[ $1 == "" ]]
then
echo -e "\033[1;30m•••••> Script Edited ColtSeals TecnologY (NERD's)\033[0m"
echo -e "\033[0;35m------------------------------------------------------------\033[0m"
echo -e "\033[36;37m PAINEL DE REDEFINIR USUARIO SSH\033[0m"
echo -e "\033[0;35m------------------------------------------------------------\033[0m"
echo -e "\033[01;36m║\033[1;37m0\033[1;36m║•\033[0;34m VOLTAR \033[01;32m(Volta ao Menu VPN)\033[0m"
echo -e "\033[01;36m║\033[1;37m1\033[1;36m║•\033[01;37m MUDAR NOME \033[01;32m(Mudar nome de um usuario)\033[0m"
echo -e "\033[01;36m║\033[1;37m2\033[1;36m║•\033[01;37m ALTERAR LIMITE \033[01;32m(Altera o Limite de um Usuario)\033[0m"
echo -e "\033[01;36m║\033[1;37m3\033[1;36m║•\033[01;37m ALTERAR DATA \033[01;32m(Altera a validade de um Usuario)\033[0m"
echo -e "\033[01;36m║\033[1;37m4\033[1;36m║•\033[01;37m ALTERAR SENHA \033[01;32m(Altera a senha de um Usuario SSH)\033[0m"
echo -e "\033[01;36m║\033[1;37m5\033[1;36m║•\033[01;37m VOLTAR \033[01;32m(Volta ao Menu anterior)\033[0m"
read -p ": " opcao
else
opcao=$1
fi
case $opcao in
  0 | 00 )
   vpspack;;
  1 | 01 )
   mudarnome;;
  2 | 02 )
   limite;;
  3 | 03 )
   expiracao;;
  4 | 04 )
   nova;;
  5 | 05 )
   redefinirusuario;;
   esac
